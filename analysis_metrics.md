# AI 使用习惯分析指标与可视化建议

基于你的 messages 和 edges 数据集，以下是 10 个可以揭示 AI 使用习惯的 metrics 和可视化方案：

## 1. 📊 时间维度使用画像
**Metrics:**
- 每日/每周/每月的对话数量趋势
- 每日/每周/每月的消息总数趋势
- 平均每个对话的消息数量
- 对话活跃时间段分布（按小时）

**可视化:**
- 时间序列折线图（对话数、消息数）
- 热力图（星期 × 小时，显示活跃时段）
- 日历热力图（每日活跃度）

**洞察:** 了解你的使用频率模式，什么时候最活跃，是否有使用习惯的季节性或周期性变化

---

## 2. 🌳 对话树结构分析
**Metrics:**
- 对话平均深度（从根到最深节点的平均长度）
- 对话最大深度
- 分叉节点比例（children > 1 的节点占比）
- 平均分支因子（平均每个节点有多少子节点）
- 线性对话 vs 分叉对话的比例

**可视化:**
- 对话深度分布直方图
- 分叉节点数分布
- 代表性对话树可视化（Sankey 图或树状图）

**洞察:** 了解你如何与 AI 交互——是线性的问答模式，还是经常探索不同分支、尝试不同的对话方向

---

## 3. 💬 角色交互模式
**Metrics:**
- User/Assistant/System/Tool 消息比例
- User vs Assistant 消息数量比
- Tool 调用频率
- System 消息的使用情况

**可视化:**
- 饼图/环形图（角色分布）
- 堆叠柱状图（每个对话中各角色的消息数）
- 时间序列堆叠面积图（角色使用趋势）

**洞察:** 了解你使用 AI 的深度——是否频繁使用工具、系统消息的使用模式

---

## 4. 📝 内容类型偏好分析
**Metrics:**
- 各种 content_type 的分布（text, code, thoughts, reasoning_recap, multimodal_text 等）
- 代码相关的消息占比
- 多模态内容（图片）的使用频率
- 推理过程（thoughts, reasoning_recap）的使用情况

**可视化:**
- 内容类型分布饼图
- 时间序列堆叠图（内容类型趋势）
- 代码 vs 文本使用比例雷达图

**洞察:** 了解你主要用 AI 做什么——编程、文本生成、图片分析，还是逻辑推理

---

## 5. 🔗 内容特征标签分析
**Metrics:**
- 包含代码的消息占比（has_code）
- 包含图片的消息占比（has_image）
- 包含链接的消息占比（has_link）
- 多标签组合模式（同时包含代码+链接等）

**可视化:**
- 三标签分布柱状图
- Venn 图（代码/图片/链接的交集）
- 标签组合热力图

**洞察:** 了解你在对话中的内容特征，是否经常结合多种媒体类型

---

## 6. ⏱️ 对话生命周期分析
**Metrics:**
- 单个对话的平均时长（从第一条到最后一条消息）
- 对话长度分布（消息数）
- 超长对话（>50 条消息）的比例
- 短对话（<10 条消息）的比例
- 消息间隔时间分析（你回复的速度）

**可视化:**
- 对话长度分布直方图
- 对话时长箱线图
- 消息间隔时间分布（对数坐标）

**洞察:** 了解你的对话模式——是快速问答还是深度探讨，平均对话持续多久

---

## 7. 🔄 对话编辑与迭代模式
**Metrics:**
- 有多个子节点的节点数（探索不同回答方向）
- 平均每次选择探索几个分支
- 分叉对话的占比
- 最长分叉路径

**可视化:**
- 分叉节点分布直方图
- 分叉对话的树形可视化
- 分叉频率趋势图

**洞察:** 了解你是否经常探索不同的对话路径，是否有"迭代优化"的使用习惯

---

## 8. 📈 使用强度与活跃度
**Metrics:**
- 每日平均对话数
- 每日平均消息数
- 最长连续使用天数
- 使用天数 vs 总天数（活跃度）
- 对话密度（消息数/对话数）

**可视化:**
- 使用强度热力图（按日期）
- 活跃度日历图
- 使用强度趋势线

**洞察:** 了解你的整体使用强度，是否有持续使用还是间歇性使用

---

## 9. 🎯 对话主题聚类（基于文本）
**Metrics:**
- 对话标题关键词分析
- 用户消息文本长度分布
- 常见问题模式（关键词频率）
- 话题切换频率

**可视化:**
- 词云图（对话标题）
- 文本长度分布直方图
- 关键词频率柱状图
- 主题聚类可视化（如果做 NLP 分析）

**洞察:** 了解你最常问什么类型的问题，主要关注哪些领域

---

## 10. 📦 工具与高级功能使用
**Metrics:**
- Tool 消息的使用频率和趋势
- 不同工具类型的使用分布（从 metadata 或 tool 消息中提取）
- Reasoning/Thoughts 类型消息的使用频率
- 复杂对话（多工具调用、深度推理）的比例

**可视化:**
- 工具使用趋势线
- 工具类型分布饼图
- 复杂对话标识散点图（消息数 vs 工具调用数）

**洞察:** 了解你是否充分利用了 AI 的高级功能，是否倾向于简单问答还是复杂任务

---

## 🎨 额外推荐：组合可视化仪表板

**总体仪表板建议:**
1. **概览卡片**: 总对话数、总消息数、使用天数、平均对话长度
2. **时间趋势区**: 使用频率趋势、活跃时段热力图
3. **内容分析区**: 角色分布、内容类型分布、标签分析
4. **行为模式区**: 对话深度分布、分叉分析、交互模式
5. **高级功能区**: 工具使用、推理使用、复杂对话占比

**技术栈建议:**
- Python: pandas, matplotlib, seaborn, plotly, networkx（用于树可视化）
- 或者使用 Jupyter Notebook 创建交互式分析
- 也可以考虑用 Streamlit/Dash 创建交互式仪表板

---

## 📋 数据挖掘提示

从现有数据中还可以提取：
- **metadata_raw**: 可能包含模型信息、token 使用、工具调用详情
- **parts_raw**: 可能包含更详细的内容结构
- **对话级别的字段**: create_time, update_time, is_archived 等（如果有的话）

建议先从简单的指标开始，逐步深入挖掘更复杂的模式！

